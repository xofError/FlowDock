# Prometheus Configuration
# This file defines how Prometheus scrapes metrics from services

global:
  scrape_interval: 15s  # How often to scrape targets (default)
  evaluation_interval: 15s  # How often to evaluate rules (default)
  external_labels:
    cluster: 'flowdock'
    environment: 'development'

# Alertmanager configuration (optional, for production)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             - localhost:9093

# Load rules once and periodically evaluate them (optional)
# rule_files:
#   - "/etc/prometheus/rules/*.yml"

scrape_configs:
  # Auth Service - Main application metrics
  - job_name: 'auth_service'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['auth_service:8000']
    scrape_interval: 10s
    scrape_timeout: 5s

  # Prometheus itself - Metrics about Prometheus
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Optional: Add more services here as they are added
  # - job_name: 'media_service'
  #   metrics_path: '/metrics'
  #   static_configs:
  #     - targets: ['media_service:8000']
  #   scrape_interval: 10s
  #   scrape_timeout: 5s
